<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart â€“ Pacific Seller's</title>
<meta name="description" content="Review selected products in your cart before checkout at Pacific Seller's.">
<meta name="robots" content="noindex, nofollow">
<link rel="canonical" href="https://pacificsellers.in/cart.html">
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="toast" id="toast"></div>

<!-- NAV -->
<nav>
  <a class="nav-logo" href="index.html" id="navLogo"></a>
  <div class="nav-links">
    <a class="nav-btn" href="index.html">ğŸ  Products</a>
    <a class="nav-btn" href="manufacturer.html">ğŸ­ Manufacturer</a>
    <a class="cart-btn" href="cart.html">ğŸ›’ Cart <span class="cart-count" id="cartCount">0</span></a>
  </div>
</nav>

<!-- CART CONTENT -->
<div class="cart-page-wrap">
  <div class="page-section-title">Your <span>Cart</span></div>
  <div id="cartContent"></div>
</div>

<div id="footerMount"></div>

<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="orderdata.store.js"></script>
<script src="app.js"></script>
<script>
document.getElementById('navLogo').innerHTML = navLogoSVG();
document.getElementById('footerMount').innerHTML = footerHTML();

function renderCartPage() {
  const cart = getCart();
  const container = document.getElementById('cartContent');

  if (!cart.length) {
    container.innerHTML = `
      <div class="cart-empty-state">
        <div class="icon">ğŸ›’</div>
        <h2>Your Cart is Empty</h2>
        <p>Looks like you haven't added any products yet.</p>
        <a href="index.html" class="btn-primary">Browse Products</a>
      </div>`;
    return;
  }

  const subtotal = cart.reduce((s, i) => s + i.price * i.qty, 0);
  const shipping = subtotal > 999 ? 0 : 49;
  const total = subtotal + shipping;

  container.innerHTML = `
    <div class="cart-page-grid">
      <div>
        <div class="cart-table-card">
          <table class="cart-table">
            <thead>
              <tr>
                <th colspan="2">Product</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Total</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="cartTableBody"></tbody>
          </table>
        </div>
        <div style="margin-top:16px;display:flex;gap:10px;">
          <a href="index.html" class="btn-continue-shop" style="max-width:200px;">â† Continue Shopping</a>
          <button class="btn-continue-shop" style="max-width:200px;color:#ef4444;border-color:#ef4444;" onclick="clearCart()">ğŸ—‘ï¸ Clear Cart</button>
        </div>
      </div>
      <div>
        <div class="cart-sidebar-card">
          <div class="sidebar-title">Order Summary</div>
          <div class="sidebar-row"><span>Subtotal (${cart.reduce((s, i) => s + i.qty, 0)} items)</span><span>â‚¹${subtotal.toLocaleString()}</span></div>
          <div class="sidebar-row"><span>Shipping</span><span>${shipping === 0 ? '<span style="color:var(--green);font-weight:700">FREE</span>' : 'â‚¹' + shipping}</span></div>
          <div class="sidebar-row"><span>Payment Mode</span><span style="color:var(--green);font-weight:700">Cash on Delivery</span></div>
          ${shipping === 0 ? `<div style="font-size:11px;color:var(--green);margin-bottom:8px;">ğŸ‰ You saved â‚¹49 on shipping!</div>` : `<div style="font-size:11px;color:var(--gray);margin-bottom:8px;">Add â‚¹${1000 - subtotal > 0 ? (1000 - subtotal).toLocaleString() : 0} more for free shipping</div>`}
          <hr class="sidebar-divider">
          <div class="sidebar-total"><span>Total Payable</span><span>â‚¹${total.toLocaleString()}</span></div>
          <a href="checkout.html" class="btn-checkout-page">Proceed to Checkout â†’</a>
          <div style="text-align:center;margin-top:10px;font-size:11px;color:var(--gray);">ğŸ’µ Pay â‚¹${total.toLocaleString()} cash on delivery</div>
          <div style="margin-top:16px;background:rgba(245,197,24,0.06);border:1px solid rgba(245,197,24,0.2);border-radius:10px;padding:12px 14px;">
            <div style="font-size:12px;font-weight:700;color:var(--gold);margin-bottom:4px;">ğŸ”’ Secure COD Checkout</div>
            <div style="font-size:11px;color:var(--gray);line-height:1.5;">No advance payment needed. Pay only when you receive your order at your doorstep.</div>
          </div>
        </div>
      </div>
    </div>`;

  renderCartTable(cart);
}

function renderCartTable(cart) {
  const tbody = document.getElementById('cartTableBody');
  if (!tbody) return;
  tbody.innerHTML = cart.map(item => `
    <tr>
      <td>${item.image ? `<img class="cart-item-thumb" src="${item.image}" onerror="this.style.display='none'">` : `<div class="cart-item-thumb-ph">ğŸ›’</div>`}</td>
      <td>
        <div class="cart-item-name-text">${item.name}</div>
        <div class="cart-item-cat">${item.category || ''}</div>
      </td>
      <td style="color:var(--gold);font-weight:700;">â‚¹${item.price.toLocaleString()}</td>
      <td>
        <div class="qty-control">
          <button class="qty-btn" onclick="changeQty(${item.id}, -1)">âˆ’</button>
          <span class="qty-val">${item.qty}</span>
          <button class="qty-btn" onclick="changeQty(${item.id}, 1)">+</button>
        </div>
      </td>
      <td style="color:var(--white);font-weight:700;">â‚¹${(item.price * item.qty).toLocaleString()}</td>
      <td><button class="remove-btn" onclick="removeFromCart(${item.id})" title="Remove">ğŸ—‘ï¸</button></td>
    </tr>`).join('');
}

function changeQty(id, d) {
  let cart = getCart();
  const item = cart.find(i => i.id == id);
  if (!item) return;
  item.qty += d;
  if (item.qty <= 0) cart = cart.filter(i => i.id != id);
  saveCart(cart);
  renderCartPage();
}

function removeFromCart(id) {
  let cart = getCart().filter(i => i.id != id);
  saveCart(cart);
  renderCartPage();
  showToast('ğŸ—‘ï¸ Item removed');
}

function clearCart() {
  if (!confirm('Clear all items from cart?')) return;
  saveCart([]);
  renderCartPage();
  showToast('ğŸ—‘ï¸ Cart cleared');
}

window.addEventListener('DOMContentLoaded', () => {
  renderCartPage();
});
</script>
</body>
</html>
